<% if current_user %>
<div class="background-box">
  <div class="container itinerary-show">
    <h1><%=@itinerary.itinerary_name%></h1>
    <h2>You have collected <%= @collected %> / <%= @itinerary.itinerary_items.count %> stamps in this itinerary</h2>
      <div class="type-transport-buttons">
        <div id="walking" class="transport-button round-yellow-button-route">
          <div><i class="fas fa-walking"></i></div>
          <div>Walking</div>
        </div>

        <div id="cycling" class="transport-button round-grey-button-route">
          <div><i class="fas fa-biking"></i></div>
          <div>Cycling</div>
        </div>

        <div id="driving" class="transport-button round-grey-button-route">
          <div><i class="fas fa-car"></i></div>
          <div>Driving</div>
        </div>
      </div>

      <div id="map2"
          class = "map"
          style="width: 100%;
          height: 70%; position:relative;"
          data-markers="<%= @markers.to_json %>"
          data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
        <div class="direction-box d-flex">
          <div class = "route-box">
            <h5 class="mb-3 mr-3"> Suggested Route </h5>
            <div>
              <div id="route-distance">Calculating distance...</div>
              <div id="route-duration">Calculating time...</div>
            </div>
            <div id="route-instructions">
            </div>
          </div>
          <div class="direction-arrow">
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>
      </div>
      <%= link_to 'Go back <i class="fas fa-chevron-circle-left"></i>'.html_safe, user_itineraries_path(@itinerary.user), class:'text-secondary itinerary-link', style: "font-size:24px; margin: 0 auto;" %>
  </div>
</div>
<% else %>
<div class="background-box">
  <div class="container itinerary-show">
    <h1><%=@itinerary.itinerary_name%></h1>
    <h2><%= @itinerary.user.first_name %> has collected <%= @itinerary.itinerary_items.select {|item| item.stamp.stamp_status==true}.count %> / <%= @itinerary.itinerary_items.count %> <%="stamp".pluralize(@itinerary.itinerary_items.select {|item| item.stamp.stamp_status==true}.count)%> in this itineary</h2>
      <div class="type-transport-buttons">
        <div id="walking" class="transport-button round-yellow-button-route">
          <div><i class="fas fa-walking"></i></div>
          <div>Walking</div>
        </div>

        <div id="cycling" class="transport-button round-grey-button-route">
          <div><i class="fas fa-biking"></i></div>
          <div>Cycling</div>
        </div>

        <div id="driving" class="transport-button round-grey-button-route">
          <div><i class="fas fa-car"></i></div>
          <div>Driving</div>
        </div>
      </div>

      <div id="map2"
          class = "map"
          style="width: 100%;
          height: 70%; position:relative;"
          data-markers="<%= @markers.to_json %>"
          data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
        <div class="direction-box" style ="overflow-y:scroll;">
          <h5 class="mb-3"> Suggested Route </h5>
          <div>
            <div id="route-distance">Calculating distance...</div>
            <div id="route-duration">Calculating time...</div>
          </div>

          <div id="route-instructions">
          </div>
        </div>
      </div>
      <%= link_to 'Go back <i class="fas fa-chevron-circle-left"></i>'.html_safe, user_itineraries_path(@itinerary.user), class:'text-secondary itinerary-link', style: "font-size:24px; margin: 0 auto;" %>
  </div>
</div>
<% end %>



