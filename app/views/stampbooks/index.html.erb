<div class="stamps-box">
  <div class='d-flex justify-content-between w-100 mt-5'>
    <div class="stampbook-owner ml-3">
      <%= cl_image_tag @user.photo.key, height: 50, width: 50, crop: :fill, :class => "user-photo"  %>
      <% if @user == current_user %>
        <h4 class="stampbook-owner-text">You are viewing <strong>your</strong> stampbook</h4>
      <% else %>
        <h4 class="stampbook-owner-text">You are viewing <br> <strong><%= @user.first_name %></strong>'s stampbook</h4>
      <% end %>
    </div>

    <div class="stamps-title mr-3">
      <% if @user == current_user %>
        <h1 class="stampbook-name" style ="font-size: 36px;">All Stampbooks </h1>
        <p>You have <%= pluralize(current_user.stampbooks.count, 'stampbook')%> </p>
      <% else %>
      <h1 class="stampbook-name" style ="font-size: 36px;"><%= @user.first_name  %> has <%= pluralize(@user_stampbooks.count, 'stampbook')%> </h1>
      <% end %>
    </div>
  </div>
  <div class="container card-container">
    <% if @user == current_user %>
      <div class='d-flex justify-content-center'>
        <%= link_to("Create a stampbook", new_stampbook_path, class:'yellow-button') %>
        <%= link_to("+ Find a public stampbook to add to your library", new_stampbook_path , class:'yellow-button ml-2') %>
      </div>
    <% end %>
    <div class="row mt-4">
      <div class="col-sm-12">
        <div class="scroller">
          <% @user_stampbooks.each do |stampbook| %>
            <div class="card text-center card-edges card-transition">
              <%= cl_image_tag stampbook.stamps.sample.location.location_photos.first.key, crop: :fill, class:'img-fluid stampbook-picture img-edges'  %>
              <div class="card-body">
                <h5 class="card-title card-title-font"> <%= link_to stampbook.stampbook_name, stampbook_stamps_path(stampbook) %></h5>
                <p class="card-text card-text-font"><%= stampbook.stampbook_description %></p>
                <div class="d-flex justify-content-center">
                  <div class="progress" style = "width: 250px; font-size: 12px;">
                    <% if stampbook.none_collected?%>
                      <div class="progress-bar" role="progressbar" style="width: 0" aria-valuenow= "0" aria-valuemin="0" aria-valuemax="100"></div>
                    <% else %> 
                      <div class="progress-bar" role="progressbar" style="width: <%= stampbook.percent_completed %>%" aria-valuenow= "<%= stampbook.percent_completed %>" aria-valuemin="0" aria-valuemax="100"><%= stampbook.percent_completed %>%</div>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    
    <% if current_user %>
       <div class="row text-center mt-5">
        <div class="col-sm-12">
          <%= link_to("Go back to your profile", user_path(current_user) , class:'yellow-button') %>
        </div>
      </div>
    <% else %>
      <div class="row text-center mt-5">
        <div class="col-sm-12">
          <%= link_to("Go back to #{@user.first_name}'s profile", user_path(@user) , class:'yellow-button') %>
        </div>
      </div>
    <% end %>
  </div>
</div>
